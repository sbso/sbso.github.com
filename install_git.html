<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<link type="image/x-icon" rel="icon" href="favicon.ico" />
		<link type="image/x-icon" rel="shortcut icon" href="favicon.ico" />
		<!--[if IE]><script type="text/javascript" src="js/html5.js"></script><![endif]-->
		<link rel="stylesheet" type="text/css" href="css/style.css" />
		<link rel="stylesheet" type="text/css" href="css/vim-like.css" />
		<title>liweilijie wiki sbso</title>
	</head>
	<body>
		<div id="wrapper">
			<header>
			<nav>
			<ul>
				<li class="first"><a href="index.html" title="Home">Home</a></li>
				<li><a href="index.html" title="Blog">Blog</a></li>
				<li class="actived"><a href="index.html" title="Wiki">Wiki</a></li>
				<li><a href="https://twitter.com/hotoo" title="Twitter">Twitter</a></li>
				<li class="last"><a href="%root_path/resume.html" title="About Me">README</a></li>
			</ul>
			</nav>
			</header>
			<div class="content">
				<article>
				
<h1>install_git</h1>
<div class="toc">
<ul>
<li><a href="#toc_0.1">1. <code>rpm -qa | grep -i git</code></a>
<li><a href="#toc_0.2">2. install</a>
<li><a href="#toc_0.3">3.	<code>man git-commandname</code></a>
<li><a href="#toc_0.4">4. register you message</a>
<li><a href="#toc_0.5">5. 第一个示例</a>
<li><a href="#toc_0.6">6. 修改<code>beap_app_wj.c</code></a>
<li><a href="#toc_0.7">7. 提交修改后的内容<br /></a>
<li><a href="#toc_0.8">8. 总结</a>
<li><a href="#toc_0.9">9. 补充</a>
</ul>
</ul>
</div>
<h2 id="toc_0.1">1. <code>rpm -qa | grep -i git</code></h2>
<p>
	<code>grep</code>命令的<code>-i</code>参数表示不区分大小写，这样的话无论是<code>git/GIT/Git...</code>都逃不过<code>grep</code>的法眼了。如果没有找到git的核心包，而只是与其相关的别的包，则立刻安装一个吧。<br />
	当然由于本人家里的机器使用了<code>arch</code>，所以得用命令<code>pacman -Ss git</code> 来查看<code>git</code>安装的包。<br />
</p>
<h2 id="toc_0.2">2. install</h2>
<p>
	安装应该都很简单，用<code>yum install git-all.i386</code> 或者在<code>arch</code>上面用<code>pacman -S git</code> 即可安装成功。<br />
</p>
<h2 id="toc_0.3">3.	<code>man git-commandname</code></h2>
<p>
	你想要查看<code>git</code>的命令，则利用<code>man</code>最方便。比如<code>man git-log</code> <code>man git-commit</code><br />
</p>
<h2 id="toc_0.4">4. register you message</h2>
<p>
	接下来把你自己的信息注册到<code>git</code>系统里面，比如自己的姓名，email等等<br />
	<code>git config --global user.name "Your Name"</code><br />
	<code>git config --global user.email "You@email.address"</code><br />
	例如我在系统里作如下初始化：
</p>
<pre>
[root@liweilijie liwei]# git config --global user.name "liweilijie"
[root@liweilijie liwei]# git config --global user.email "liweilijie@gmail.com"
</pre>
<h2 id="toc_0.5">5. 第一个示例</h2>
<p>
	我手头有个<code>wj</code>项目代码，完全用<code>c</code>语言编写的项目，下面我将用如下步骤导入这个项目：<br />
</p>
<pre>
		[root@liweilijie ~]# cd wj/
		[root@liweilijie wj]# git init
		Initialized empty Git repository in /root/wj/.git/
		[root@liweilijie wj]# ls -a
		.                      comm.nsmap     ga_process.c    idfy_table.h  soapStub.h
		..                     cscope.in.out  ga_process.h    liw.vim       stdsoap2.c
		beap_app_wj.c          cscope.out     ga_xml.c        Makefile.am   stdsoap2.h
		beap_app_wj_def.h      cscope.po.out  ga_xml.h        Makefile.in   wjpt_comm.c
		beap_app_wj_externs.h  CVS            .git            p.sh
		beap_app_wj.h          filenametags   gsoap_client.c  soapC.c
		beap_app_wj_util.c     ga_comm.c      gsoap_client.h  soapClient.c
		comm.h                 ga_comm.h      idfy_table.c    soapH.h
		[root@liweilijie wj]# git add .
		[root@liweilijie wj]# git commit -m 'wj first commit'
		[master (root-commit) 795afff] wj first commit
		36 files changed, 358873 insertions(+), 0 deletions(-)
		create mode 100644 CVS/Entries
		create mode 100644 CVS/Repository
		create mode 100644 CVS/Root
		create mode 100644 CVS/Tag
		create mode 100644 Makefile.am
		create mode 100644 Makefile.in
		create mode 100644 beap_app_wj.c
		create mode 100644 beap_app_wj.h
		create mode 100644 beap_app_wj_def.h
		create mode 100644 beap_app_wj_externs.h
		create mode 100644 beap_app_wj_util.c
		create mode 100644 comm.h
		create mode 100644 comm.nsmap
		create mode 100644 cscope.in.out
		create mode 100644 cscope.out
		create mode 100644 cscope.po.out
		create mode 100644 filenametags
		create mode 100644 ga_comm.c
		create mode 100644 ga_comm.h
		create mode 100644 ga_process.c
		create mode 100644 ga_process.h
		create mode 100644 ga_xml.c
		create mode 100644 ga_xml.h
		create mode 100644 gsoap_client.c
		create mode 100644 gsoap_client.h
		create mode 100644 idfy_table.c
		create mode 100644 idfy_table.h
		create mode 100644 liw.vim
		create mode 100755 p.sh
		create mode 100644 soapC.c
		create mode 100644 soapClient.c
		create mode 100644 soapH.h
		create mode 100644 soapStub.h
		create mode 100644 stdsoap2.c
		create mode 100644 stdsoap2.h
		create mode 100644 wjpt_comm.c
		[root@liweilijie wj]#

</pre>
<p>
<code>git init</code> 命令用于初始化当前所在目录的这个项目，<code>shell</code>返回的提示表明已经建立了一个<code>.git</code>隐藏目录来保存这个项目目前的进展信息。我们可以用<code>ls -a</code>看到它。<br />
<code>git add .</code> 这个命令要求<code>git</code>给我目前的这个项目制作一个快照<code>snapshot</code>（快照只是登记留名，快照不等于记录在案，<code>git</code>管快照叫做索引<code>index</code>)。快照一般会暂时存储在一个临时存储区域中。<br />
<code>git commit</code> 用于将快照里登记的内容永久写入<code>git</code>仓库中，也就是开发者已经想好了要提交自己的开发成果了。<br />
在输入<code>git commit</code>并按回车时会转到一个<code>vi</code>窗口，要求开发者输入这次提交的版本和开发信息。意思就是说这个项目目前的版本是多少，已经完成了哪些功能，还有哪些功能是需要以后完成的等等信息（如果你不介意，当然也可以写上你的感情日记，也不会有人管你，只要你的开发伙伴可以忍受就好）。<br />
</p>
<h2 id="toc_0.6">6. 修改<code>beap_app_wj.c</code></h2>
<p>
	这里的修改指随便增加一个打印语句。<br />
</p>
<pre>
		[root@liweilijie wj]# vim beap_app_wj.c
		[root@liweilijie wj]# man git-diff
		[root@liweilijie wj]#
		[root@liweilijie wj]# git diff -cached
		error: invalid option: -cached
		[root@liweilijie wj]# git diff --cached

</pre>
<p>
	改变beap_app_wj.c里面的内容，实际上增加了一条printf语句。然后查看一下git-diff的用法。再<code>git diff --cached</code>。
	这个git diff –cached是用来查看index file和仓库之间代码的区别的。由于我们目前只是在working tree里做了修改，还没有报告给index file，所以使用此命令显然会输出空信息。而如果省略–cached选项的话，就是比较working tree和index file的区别，由于我们的确在working tree里做了修改，所以使用git diff后会输出修改信息。（可能有些读者不知道working tree是什么意思，其实很简单，通俗的说，它就是你的源代码文件，在这个例子里也就是<code>beap_app_wj.c</code>文件喽）。
</p>
<pre>
	[root@liweilijie wj]# git diff
		diff --git a/beap_app_wj.c b/beap_app_wj.c
		index d0b03bb..a74268f 100644
		--- a/beap_app_wj.c
		+++ b/beap_app_wj.c
		@@ -101,6 +101,7 @@ sem_t                           netid_hash_sem, guest_hash_sem;
	/* the program start  */
	int main(int argc, char *argv[])
	{
		+       printf("this is main.c program \n");
		char cRetVal, *p;
		int i, j;

		[root@liweilijie wj]# git status
		# On branch master
		# Changes not staged for commit:
		#   (use "git add &lt;file&gt;..." to update what will be committed)
		#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)
		#
		#       modified:   beap_app_wj.c
		# no changes added to commit (use "git add" and/or "git commit -a")
			[root@liweilijie wj]#

</pre>
<p>
（至于<code>git diff</code>的输出内容我们现在不必研究太深，只要知道这些信息表示的是修改后和修改前的不同之处就可以了）<br />
使用<code>git diff</code>了解了不同之后，还可以使用<code>git status</code>命令来获取整体改动的信息：<br />
<code>no changes added to commit (use “git add” and/or “git commit -a”)</code><br />
可以看到提示信息<code>“changed but not updated”</code>，就是说<code>git</code>发现你有已经修改了但还未<code>git add</code>的内容。<br />
如果git提示说<code>“Changes to be committed”</code>，那就是表明<code>git</code>发现了你已经<code>git add</code>但还未<code>git commit</code>的内容。<br />
如果git提示说<code>“Untracked files”</code>，那么就是你增加了新文件或者在某个子目录下增加了新文件。<br />
下面该进入提交阶段了。<br />
</p>
<h2 id="toc_0.7">7. 提交修改后的内容<br /></h2>
<pre>
	[root@liweilijie wj]# git add beap_app_wj.c
	[root@liweilijie wj]#

</pre>
<p>
这句是要告诉git，我已经修改了main.c文件，你（指git）去检查一下。当然，如果你新增加了一个文件，比如new.c，也需要在这里先执行git add new.c告诉git。<br />
提交我的工作：<br />
</p>
<pre>
[root@liweilijie wj]# git commit -m 'changed beap_app_wj'
[master dd19ad8] changed beap_app_wj
 1 files changed, 1 insertions(+), 0 deletions(-)
[root@liweilijie wj]#

</pre>
<p>
<br /> 至此，我的修改工作完成了，而且也顺利地提交给了git。还是不放心？来查查：<br />
</p>
<pre>
[root@liweilijie wj]# git log
commit dd19ad8a2db94b98807a7bebabc9064dc0d04004
Author: liweilijie &lt;liweilijie@gmail.com&gt;
Date:   Sun Jul 10 10:13:20 2011 +0800

    changed beap_app_wj

commit 795afff95fbd6d763e9f22cf931c987637017c56
Author: liweilijie &lt;liweilijie@gmail.com&gt;
Date:   Sun Jul 10 02:01:26 2011 +0800

    wj first commit
[root@liweilijie wj]#

</pre>
<h2 id="toc_0.8">8. 总结</h2>
<hr />
<p>
总结一下<br />
如果修改了项目代码，先git add你修改过的文件，再git diff并git status查看确认，然后git commit提交，然后输入你的开发日志，最后git log再次确认。<br />
现在教给你一个偷懒方法，那就是git commit -a，这个命令可以直接提交所有修改，省去了你git add和git diff和git commit的工序，可谓一条龙服务。<br />
但是，此处有一点应该注意，那就是git commit -a无法把新增文件或文件夹加入进来，所以，如果你新增了文件或文件夹，那么就要老老实实的先git add .，再git commit喽。<br />
对了，针对开发日志，要说一句：切记写开发日志的时候，第一行一定要是少于50字的开发概括信息，而且第二行务必是空行，第三行开始才可以开始细致描述开发信息。这是因为很多版本服务系统中的email机制都会选取log中的第一行为邮件题目。(你应该明白了吧:))<br />
ps:我可能在此前也没有太注意关于日志写法的问题，今后也要避免错误:)<br />
</p>
 
<h2 id="toc_0.9">9. 补充</h2>
<hr />
<p>
接着上次的话题，先谈一下git-add命令。<br />
在其他的版本控制系统中，add命令往往是用在有新文件加入时。而在git中，add命令似乎更简单了，只要是文件有改动，无论是这个文件被修改的还是被新加入的，都可以使用add来进行登记。<br />
<hr />
接着谈log命令。<br />
最简单的查询开发日志的方法就是git log。<br />
但如果你觉得git log给出的信息太单薄了，可以使用git log -p，这样git不但会给出开发日志，而且会显示每个开发版本的代码区别所在。<br />
</p>

				</article>
			</div>
			<script type="text/javascript">
				function onSearch(){
					location.href = "search.html#"+document.getElementById("input_search").value;
					return false;
				}
</script>
<div style="border-top:1px solid #ccc; background:#f6f6f6 none;padding:8px;">
	<form action="search.html" id="searchbox" onsubmit="return onSearch();">
		<input type="text" name="q" id="input_search" />
		<input type="submit" value="搜索" />
	</form>
</div>
<footer>
<a href="index.html" id="back-home">&lsaquo; 首页</a>
<p><a rel="license" href="http://creativecommons.org/licenses/by/2.5/"><img alt="Creative Commons License" style="border-width: 0pt;" src="http://i.creativecommons.org/l/by/2.5/88x31.png" align="right"></a>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/2.5/">Creative Commons Attribution 2.5 Generic License</a>.<br>
Copyleft © 2011, Driven by <a href="http://code.google.com/p/vimwiki/">Vimwiki</a>, Theme by liweilijie
</p>
</footer>

<script type="text/javascript">
	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'liweilijie'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function () {
 var s = document.createElement('script'); s.async = true;
 s.type = 'text/javascript';
 s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
 (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
 }());
</script>
											 </body>
										 </html>
